import q from"./Button.ca57eb16.js";import J from"./Card.19247a1e.js";import K from"./Modal.feac1495.js";import{u as L}from"./Student.647c2a39.js";import{u as M}from"./Class.08781640.js";import{f as z,s as h,i as y,j as V,o as u,k as U,w as i,g as t,a as n,b as f,d as R,t as d,h as D,l as T,c as j,F as A,v as P}from"./entry.2e60e461.js";import{g as r,s as w}from"./index.ccfc92be.js";import Q from"./Badge.3ce7fdaa.js";import W from"./Tabs.4f258f20.js";import X from"./Input.c13c5c5f.js";import Y from"./SelectMenu.6bae9ea8.js";import Z from"./ButtonGroup.556a6610.js";import"./Icon.4abee38d.js";import"./Icon.d59a0deb.js";import"./index.b8fe2cb5.js";import"./Link.fb4a2cb7.js";import"./nuxt-link.37c5b906.js";import"./tw-merge.608f89b9.js";import"./selectMenu.219fca56.js";import"./useButtonGroup.cc33183f.js";import"./button.b8dbcbb7.js";import"./transition.cdc336cb.js";import"./dom.c24df755.js";import"./hidden.287ced4a.js";import"./focus-management.add74563.js";import"./use-root-containers.a607b7ae.js";import"./use-outside-click.45106478.js";import"./micro-task.89dcd6af.js";import"./open-closed.a3018940.js";import"./disposables.57da4964.js";import"./fetch.accb1318.js";import"./Generics.d9123dbf.js";import"./index.b36c4f78.js";import"./use-resolve-button-type.0b7aaae9.js";import"./useFormGroup.a790b1a9.js";import"./uid.12f507af.js";import"./Avatar.1bb1d94f.js";import"./usePopper.209527cd.js";import"./combobox.e32550dc.js";import"./use-tracked-pointer.18c36409.js";import"./use-controllable.6f70f839.js";import"./use-text-value.acb63e73.js";const ee=n("div",{class:"text-2xl"},"Are you sure you want to remove?",-1),te={class:"text-prim-400"},oe={class:"flex justify-end gap-2"},se=z({__name:"Delete",setup(k){const c=L(),g=M(),{studentToRemove:x,students:$}=h(c),_=y(()=>r($).find(m=>m.id===r(x))),{classes:C}=h(g),S=y(()=>r(C).find(m=>{var e;return m.id===((e=r(_))==null?void 0:e.class_id)})),a=y({get:()=>!!r(_),set:m=>w(x,-1)}),v=V(!1),p=async()=>{w(v,!0),await c.unenroll(r(x)),w(v,!1),w(a,!1)};return(m,e)=>{const l=q,B=J,b=K;return u(),U(b,{modelValue:t(a),"onUpdate:modelValue":e[1]||(e[1]=o=>T(a)?a.value=o:null),transition:!1,ui:{background:"bg-white dark:bg-prim-950"}},{default:i(()=>[t(_)?(u(),U(B,{key:0,ui:{background:"bg-white dark:bg-prim-950"}},{header:i(()=>[ee]),footer:i(()=>[n("div",oe,[f(l,{color:"white",onClick:e[0]||(e[0]=o=>a.value=!1)},{default:i(()=>[R("Cancel")]),_:1}),f(l,{color:"red",loading:t(v),onClick:p},{default:i(()=>[R("Delete")]),_:1},8,["loading"])])]),default:i(()=>{var o;return[n("div",null,[n("span",te,d((o=t(S))==null?void 0:o.name),1),R(" "+d(t(_).first_name)+" "+d(t(_).last_name),1)])]}),_:1})):D("",!0)]),_:1},8,["modelValue"])}}}),ne={class:"py-2 px-4 bg-prim-800 hover:bg-prim-700 rounded-sm flex justify-between items-center"},re={class:"flex gap-2 items-center text-sm"},ae={class:"text-prim-400 truncate max-w-[100px]"},le={class:"py-1.5"},ie={class:"flex gap-2 items-center"},ce=z({__name:"Item",props:{user:{type:Object,required:!0}},setup(k){const c=k,g=L(),x=M(),$=y(()=>!c.user.is_approved),{studentToRemove:_}=h(g),{classes:C}=h(x),S=y(()=>r(C).find(p=>p.id===c.user.class_id)),a=V(!1),v=async()=>{w(a,!0),await g.approve(c.user.id),w(a,!1)};return(p,m)=>{var l;const e=q;return u(),j("div",ne,[n("div",re,[n("span",ae,d(((l=t(S))==null?void 0:l.name)||"[No Class]"),1),n("span",le,d(k.user.first_name)+" "+d(k.user.last_name),1)]),n("div",ie,[t($)?(u(),U(e,{key:0,label:"Approve",onClick:v,size:"xs",color:"prim",loading:t(a)},null,8,["loading"])):D("",!0),f(e,{variant:"link",icon:"i-mdi-trash",color:"red",padded:!1,onClick:m[0]||(m[0]=B=>_.value=k.user.id)})])])}}}),me={class:"flex flex-col p-3 h-full"},de={class:"truncate helvetica round flex items-center gap-2"},pe={class:"flex"},ue={class:"min-w-[150px]"},_e={class:"flex-grow mx-1 min-h-0 overflow-y-auto flex flex-col gap-2 pr-2"},nt=z({__name:"students",setup(k){const c=L(),g=M(),{sync:x}=g,{sync:$,approve:_,unenroll:C}=c,{unregisteredcount:S}=h(c),a=y(()=>[{label:"Registered"},{label:"Unregistered",badge:r(S)}]),{students:v}=h(c),p=V(0);$(),x();const{classes:m}=h(g),e=V([]),l=V(""),B=b=>{const o=`${b.first_name} ${b.last_name}`.toLowerCase(),N=r(e).map(F=>F.id),I=!N.length||N.includes(b.class_id);return(!r(l)||o.includes(r(l).toLowerCase()))&&I&&!r(p)==!!b.is_approved};return(b,o)=>{const N=se,I=Q,F=W,E=X,G=Y,O=Z,H=ce;return u(),j("div",me,[f(N),f(F,{items:t(a),ui:{list:{background:"bg-transparent dark:bg-transparent",width:"w-full max-w-[405px]",marker:{rounded:"rounded-sm",background:"bg-prim-500 dark:bg-prim-400"},tab:{active:"text-prim-900 dark:text-prim-900"}}},modelValue:t(p),"onUpdate:modelValue":o[0]||(o[0]=s=>T(p)?p.value=s:null)},{default:i(({item:s,index:fe})=>[n("div",de,[n("span",null,d(s.label),1),s.badge?(u(),U(I,{key:0,color:"red",size:"xs"},{default:i(()=>[R(d(s.badge),1)]),_:2},1024)):D("",!0)])]),_:1},8,["items","modelValue"]),n("div",pe,[f(O,{class:"px-1 pb-2 flex-grow",ui:{rounded:"rounded-sm"}},{default:i(()=>[f(E,{block:"",placeholder:"Search...",icon:"i-mdi-search",class:"flex-grow",modelValue:t(l),"onUpdate:modelValue":o[1]||(o[1]=s=>T(l)?l.value=s:null)},null,8,["modelValue"]),f(G,{modelValue:t(e),"onUpdate:modelValue":o[2]||(o[2]=s=>T(e)?e.value=s:null),options:t(m),multiple:""},{label:i(()=>[n("span",ue,d(t(e).length||"Nothing")+" Selected",1)]),option:i(({option:s})=>[n("span",null,d(s.name),1)]),_:1},8,["modelValue","options"])]),_:1})]),n("div",_e,[(u(!0),j(A,null,P(t(v),s=>(u(),j(A,null,[B(s)?(u(),U(H,{key:0,user:s},null,8,["user"])):D("",!0)],64))),256))])])}}});export{nt as default};
