import H from"./Icon.4abee38d.js";import R from"./Input.c13c5c5f.js";import J from"./FormGroup.a21e2881.js";import A from"./SelectMenu.6bae9ea8.js";import M from"./Button.ca57eb16.js";import L from"./Card.19247a1e.js";import K from"./Form.336d0390.js";import O from"./Modal.feac1495.js";import{u as N}from"./Quiz.49a61d38.js";import{u as j}from"./Class.08781640.js";import{f as D,i as F,s as V,r as W,m as X,j as C,o as w,k as Q,w as s,b as o,a as e,d as k,g as t,t as z,l as S,h as Y,c as E,n as Z,F as ee,v as te,bF as oe}from"./entry.2e60e461.js";import{c as G,a as se}from"./index.esm.caf07660.js";import{s as b,g as $}from"./index.ccfc92be.js";import ne from"./ButtonGroup.556a6610.js";import"./Icon.d59a0deb.js";import"./index.b8fe2cb5.js";import"./tw-merge.608f89b9.js";import"./selectMenu.219fca56.js";import"./useFormGroup.a790b1a9.js";import"./uid.12f507af.js";import"./useButtonGroup.cc33183f.js";import"./Avatar.1bb1d94f.js";import"./index.b36c4f78.js";import"./usePopper.209527cd.js";import"./combobox.e32550dc.js";import"./dom.c24df755.js";import"./use-tracked-pointer.18c36409.js";import"./focus-management.add74563.js";import"./open-closed.a3018940.js";import"./use-resolve-button-type.0b7aaae9.js";import"./use-outside-click.45106478.js";import"./hidden.287ced4a.js";import"./use-controllable.6f70f839.js";import"./disposables.57da4964.js";import"./micro-task.89dcd6af.js";import"./use-text-value.acb63e73.js";import"./Link.fb4a2cb7.js";import"./nuxt-link.37c5b906.js";import"./button.b8dbcbb7.js";import"./transition.cdc336cb.js";import"./use-root-containers.a607b7ae.js";import"./fetch.accb1318.js";import"./Generics.d9123dbf.js";import"./_commonjsHelpers.23102255.js";const le={class:"text-2xl flex items-center gap-2"},ae=e("span",null,"Create Quiz",-1),ie={class:"flex flex-col gap-2"},ce={class:"min-w-[150px]"},re={class:"flex justify-end gap-2"},me=D({__name:"Create",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(d,{emit:p}){const x=d,_=p,r=F({get:()=>x.modelValue,set:a=>_("update:modelValue",a)}),g=N(),m=j(),{classes:u}=V(m);V(g);const n=W({name:"",class:void 0});X(r,a=>{a&&(n.class=void 0)});const v=G({name:se().required("Quiz name shouldn't be empty"),class:G().required("Select a class to assign to")}),U=C(!1),l=async a=>{var i;b(U,!0),await g.create(a.data.name,((i=n.class)==null?void 0:i.id)||-1),b(U,!1),b(r,!1)};return(a,i)=>{const y=H,q=R,h=J,I=A,B=M,T=L,c=K,P=O;return w(),Q(P,{modelValue:t(r),"onUpdate:modelValue":i[3]||(i[3]=f=>S(r)?r.value=f:null),transition:!1,ui:{background:"bg-white dark:bg-prim-950"}},{default:s(()=>[o(c,{state:t(n),ref:"form",schema:t(v),onSubmit:l},{default:s(()=>[o(T,{ui:{background:"bg-white dark:bg-prim-950"}},{header:s(()=>[e("div",le,[o(y,{name:"i-mdi-pen"}),ae])]),footer:s(()=>[e("div",re,[o(B,{color:"white",onClick:i[2]||(i[2]=f=>r.value=!1)},{default:s(()=>[k("Cancel")]),_:1}),o(B,{loading:t(U),type:"submit"},{default:s(()=>[k("Create")]),_:1},8,["loading"])])]),default:s(()=>[e("div",ie,[o(h,{name:"name"},{default:s(()=>[o(q,{icon:"i-mdi-pen",placeholder:"Quiz name",modelValue:t(n).name,"onUpdate:modelValue":i[0]||(i[0]=f=>t(n).name=f)},null,8,["modelValue"])]),_:1}),o(h,{name:"class"},{default:s(()=>[o(I,{modelValue:t(n).class,"onUpdate:modelValue":i[1]||(i[1]=f=>t(n).class=f),options:t(u)},{label:s(()=>{var f;return[e("span",ce,z(((f=t(n).class)==null?void 0:f.name)||"Nothing Selected"),1)]}),option:s(({option:f})=>[e("span",null,z(f.name),1)]),_:1},8,["modelValue","options"])]),_:1})])]),_:1})]),_:1},8,["state","schema"])]),_:1},8,["modelValue"])}}}),ue=e("div",{class:"text-2xl"},"Are you sure you want to delete?",-1),de={class:"text-prim-400"},pe={class:"flex justify-end gap-2"},_e=D({__name:"Delete",setup(d){const p=N(),x=j(),{quizToDelete:_,quizzes:r}=V(p),g=F(()=>$(r).find(l=>l.id===$(_))),m=F({get:()=>!!$(g),set:l=>b(_,-1)}),{classes:u}=V(x),n=F(()=>$(u).find(l=>{var a;return l.id===((a=$(g))==null?void 0:a.class_id)})),v=C(!1),U=async()=>{b(v,!0),await p.remove($(_)),b(v,!1),b(m,!1)};return(l,a)=>{const i=M,y=L,q=O;return w(),Q(q,{modelValue:t(m),"onUpdate:modelValue":a[1]||(a[1]=h=>S(m)?m.value=h:null),transition:!1,ui:{background:"bg-white dark:bg-prim-950"}},{default:s(()=>[t(g)?(w(),Q(y,{key:0,ui:{background:"bg-white dark:bg-prim-950"}},{header:s(()=>[ue]),footer:s(()=>[e("div",pe,[o(i,{color:"white",onClick:a[0]||(a[0]=h=>m.value=!1)},{default:s(()=>[k("Cancel")]),_:1}),o(i,{color:"red",loading:t(v),onClick:U},{default:s(()=>[k("Delete")]),_:1},8,["loading"])])]),default:s(()=>{var h;return[e("div",null,[e("span",de,z((h=t(n))==null?void 0:h.name),1),k(" "+z(t(g).name),1)])]}),_:1})):Y("",!0)]),_:1},8,["modelValue"])}}}),fe=d=>{const p=j(),{classes:x}=V(p);return $(x).find(_=>_.id===d)},xe={class:"w-full h-24 rounded-sm overflow-hidden"},ge={class:"h-2/3 bg-prim-800/80 p-2 flex-col"},ve={class:"text-2xl flex justify-between"},he={class:"truncate"},ze={class:"flex gap-2"},Ve={class:"text-xs px-1 text-prim-300"},$e={class:"flex items-center h-1/3 justify-between bg-prim-800/30 px-2"},be={class:"text-xs"},we=D({__name:"Item",props:{quiz:{type:Object,required:!0}},setup(d){const p=d,x=N(),{quizToDelete:_}=V(x),r=fe(p.quiz.class_id);return(g,m)=>{var n;const u=M;return w(),E("div",xe,[e("div",ge,[e("div",ve,[e("span",he,z(d.quiz.name),1),e("div",ze,[o(u,{label:"Edit",color:"prim",icon:"i-mdi-edit",to:`/admin/quizzes/${d.quiz.id}`},null,8,["to"]),o(u,{icon:"i-mdi-play",label:"Start"}),o(u,{color:"rose",icon:"i-mdi-trash",variant:"ghost",ui:{rounded:"rounded-full"},onClick:m[0]||(m[0]=v=>_.value=d.quiz.id)})])]),e("div",Ve,[e("span",null,z((n=t(r))==null?void 0:n.name),1)])]),e("div",$e,[e("span",be,z(d.quiz.total)+" points",1)])])}}}),Ue={class:"p-4 h-full flex flex-col gap-2"},ye={class:"flex gap-2"},qe={class:"min-w-[150px]"},Ce={class:"flex-grow min-h-0 overflow-y-auto w-full"},ke={class:"flex flex-col gap-2 w-full pr-2"},zt=D({__name:"quizzes",setup(d){const p=j(),x=N(),{quizzes:_}=V(x),{sync:r}=x,{sync:g}=p;Z(()=>{g(),r()});const{classes:m}=V(p),u=C([]),n=C(!1),v=C("");return(U,l)=>{const a=me,i=_e,y=oe,q=R,h=A,I=ne,B=M,T=we;return w(),E("div",Ue,[o(a,{modelValue:t(n),"onUpdate:modelValue":l[0]||(l[0]=c=>S(n)?n.value=c:null)},null,8,["modelValue"]),o(i),o(y),e("div",ye,[o(I,{class:"flex-grow",ui:{rounded:"rounded-sm"}},{default:s(()=>[o(q,{icon:"i-mdi-search",placeholder:"Search...",class:"flex-grow",modelValue:t(v),"onUpdate:modelValue":l[1]||(l[1]=c=>S(v)?v.value=c:null)},null,8,["modelValue"]),o(h,{modelValue:t(u),"onUpdate:modelValue":l[2]||(l[2]=c=>S(u)?u.value=c:null),options:t(m),multiple:""},{label:s(()=>[e("span",qe,z(t(u).length||"Nothing")+" Selected",1)]),option:s(({option:c})=>[e("span",null,z(c.name),1)]),_:1},8,["modelValue","options"])]),_:1}),o(B,{label:"Create",color:"gray",icon:"i-mdi-plus",onClick:l[3]||(l[3]=c=>n.value=!0)})]),e("div",Ce,[e("div",ke,[(w(!0),E(ee,null,te(t(_),c=>(w(),Q(T,{key:c.id,quiz:c},null,8,["quiz"]))),128))])])])}}});export{zt as default};
