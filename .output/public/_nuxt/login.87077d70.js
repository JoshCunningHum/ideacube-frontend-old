import{_ as k}from"./Logo.7946b6b7.js";import q from"./Input.c13c5c5f.js";import N from"./FormGroup.a21e2881.js";import $ from"./Button.ca57eb16.js";import A from"./Form.336d0390.js";import{f as B,bE as R,j as l,r as W,m as j,o as F,c as L,a as d,b as o,w as r,g as s,d as E,t as C}from"./entry.2e60e461.js";import{u as D,L as m}from"./Auth.31057f14.js";import{c as G,a as v}from"./index.esm.caf07660.js";import{g as y,s as c}from"./index.ccfc92be.js";import"./Icon.4abee38d.js";import"./Icon.d59a0deb.js";import"./index.b8fe2cb5.js";import"./index.b36c4f78.js";import"./tw-merge.608f89b9.js";import"./selectMenu.219fca56.js";import"./useFormGroup.a790b1a9.js";import"./uid.12f507af.js";import"./useButtonGroup.cc33183f.js";import"./Link.fb4a2cb7.js";import"./nuxt-link.37c5b906.js";import"./button.b8dbcbb7.js";import"./Account.9c8f71b4.js";import"./fetch.accb1318.js";import"./_commonjsHelpers.23102255.js";const I={class:"flex h-full justify-center items-center"},M={class:"flex flex-col items-center gap-10"},T={class:"w-full"},z={class:"flex justify-end w-full"},ge=B({__name:"login",setup(H){const f=R(),V=D(),{login:b}=V,_=l(),e=W({email:"",password:""}),w=l([]),p=l(!1);j(e,()=>c(p,!1));const P=G({email:v().required("Email Required").test("NonExistingEmail","Email not found",()=>new Promise(t=>t(!w.value.includes(e.email)))),password:v().min(4,"Must be at least 4 characters").required("Password Required").test("WrongPassword","Wrong Password",()=>new Promise(t=>t(!y(p))))}),i=l(!1),S=async t=>{c(i,!0);const a=await b(t.data.email,t.data.password);if(c(i,!1),!a)return;const{status:n}=a;n===m.AdminAccount?f.push("/admin"):n===m.StudentAccount?f.push(`/${t.data.email}`):n===m.NonExistingEmail?y(w).push(e.email):n===m.WrongPassword&&c(p,!0),_.value.validate()};return(t,a)=>{const n=k,g=q,h=N,x=$,U=A;return F(),L("div",I,[d("div",M,[o(n,{squared:!1}),o(U,{ref_key:"form",ref:_,schema:s(P),state:s(e),onSubmit:S,class:"flex items-center flex-col gap-2 w-[80%]"},{default:r(()=>[o(h,{class:"w-full",help:"Email is your firstname.lastname",name:"email"},{default:r(()=>[o(g,{placeholder:"email",modelValue:s(e).email,"onUpdate:modelValue":a[0]||(a[0]=u=>s(e).email=u)},null,8,["modelValue"])]),_:1}),d("div",T,[o(h,{class:"w-full",help:"â€",name:"password"},{default:r(()=>[o(g,{placeholder:"password",modelValue:s(e).password,"onUpdate:modelValue":a[1]||(a[1]=u=>s(e).password=u),type:"password"},null,8,["modelValue"])]),_:1}),d("div",z,[o(x,{variant:"link",padded:!1,color:"white",to:"enroll"},{default:r(()=>[E("or register with a teacher")]),_:1})])]),o(x,{type:"submit",color:"white",block:"",class:"max-w-[150px] mt-10",loading:s(i)},{default:r(()=>[E(C(s(i)?"logging in":"log in"),1)]),_:1},8,["loading"])]),_:1},8,["schema","state"])])])}}});export{ge as default};
