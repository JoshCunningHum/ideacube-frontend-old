import{j as y,ac as w,aI as g,ax as x,m as k,Z as S,bZ as v}from"./entry.2e60e461.js";import{s as T,g as b}from"./index.ccfc92be.js";const f=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function C(e,r){if(typeof e!="string")throw new TypeError("argument str must be a string");const i={},s=(r||{}).decode||I;let a=0;for(;a<e.length;){const o=e.indexOf("=",a);if(o===-1)break;let n=e.indexOf(";",a);if(n===-1)n=e.length;else if(n<o){a=e.lastIndexOf(";",o-1)+1;continue}const u=e.slice(a,o).trim();if(i[u]===void 0){let c=e.slice(o+1,n).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),i[u]=A(c,s)}a=n+1}return i}function p(e,r,i){const t=i||{},s=t.encode||D;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!f.test(e))throw new TypeError("argument name is invalid");const a=s(r);if(a&&!f.test(a))throw new TypeError("argument val is invalid");let o=e+"="+a;if(t.maxAge!==void 0&&t.maxAge!==null){const n=t.maxAge-0;if(Number.isNaN(n)||!Number.isFinite(n))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(n)}if(t.domain){if(!f.test(t.domain))throw new TypeError("option domain is invalid");o+="; Domain="+t.domain}if(t.path){if(!f.test(t.path))throw new TypeError("option path is invalid");o+="; Path="+t.path}if(t.expires){if(!E(t.expires)||Number.isNaN(t.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(o+="; HttpOnly"),t.secure&&(o+="; Secure"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():t.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function E(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function A(e,r){try{return r(e)}catch{return e}}function I(e){return e.includes("%")?decodeURIComponent(e):e}function D(e){return encodeURIComponent(e)}const N={path:"/",watch:!0,decode:e=>v(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))};function O(e,r){var u;const i={...N,...r},t=R(i)||{};let s;i.maxAge!==void 0?s=i.maxAge*1e3:i.expires&&(s=i.expires.getTime()-Date.now());const a=s!==void 0&&s<=0,o=a?void 0:t[e]??((u=i.default)==null?void 0:u.call(i)),n=s&&!a?M(o,s):y(o);{const c=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${e}`),l=()=>{_(e,n.value,i),c==null||c.postMessage(i.encode(n.value))};let d=!1;w()&&g(()=>{d=!0,l(),c==null||c.close()}),c&&(c.onmessage=h=>{d=!0,n.value=i.decode(h.data),x(()=>{d=!1})}),i.watch?k(n,()=>{d||l()},{deep:i.watch!=="shallow"}):l()}return n}function R(e={}){return C(document.cookie,e)}function L(e,r,i={}){return r==null?p(e,r,{...i,maxAge:-1}):p(e,r,i)}function _(e,r,i={}){document.cookie=L(e,r,i)}const m=2147483647;function M(e,r){let i,t=0;return w()&&g(()=>{clearTimeout(i)}),S((s,a)=>{function o(){clearTimeout(i);const n=r-t,u=n<m?n:m;i=setTimeout(()=>{if(t+=u,t<r)return o();e=void 0,a()},u)}return{get(){return s(),e},set(n){o(),e=n,a()}}})}const j=()=>{const e=O("ideacube-user");return T(e,b(e)||{id:-1,first_name:null,last_name:null,is_approved:0,class_id:0,is_admin:!1}),{user:e,isLoggedIn:()=>!!e.value&&(e.value.is_admin||e.value.id!==-1&&e.value.id!==null)}};export{j as u};
